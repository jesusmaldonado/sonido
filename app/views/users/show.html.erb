<% if !@user.playlists.empty? %>
  <h2>
    <%= @user.username %>'s Playlists
  </h2>
  <%= render partial: "playlists/playlist", collection: @user.playlists, as: "playlist"  %>
<% end %>

<% if !@user.recordings.empty? %>
  <h2>
    <%= @user.username %>'s Recordings
  </h2>
  <ul class="recordings">
    <% @user.recordings.each do |recording| %>
    <li class="recording">
      <%= recording.title %>
      <br>
      <label for="songs">
        Songs
      </label>
      <ul id="songs" class="songs">
      <% count = 0 %>
      <% recording.songs.each do |song| %>
        <li class="song">
          <% count += 1 %>
          <%= "Song" + count.to_s + " :" %><%= song.title %>
          <form id="" action="<%= playlist_songs_url %>" method="post">
            <%= auth_token %>
            <br>
            <label> Playlist to Add To:
            <select id="playlistselect" name="playlist_song[playlist_id]">
              <% current_user.playlists.each do |playlist| %>
              <option value="<%= playlist.id %>">
                <%= playlist.title %>
              </option>
              <% end %>
            </select>
            </label>
            <br>
            <br>
            <input type="hidden" name="playlist_song[song_id]" value="<%= song.id %>">
            <input type="submit" value="Add <%= song.title  %> to this playlist!">
          </form>
          <br>
          <% if !song.liked?(current_user) %>
            <form id="form_id" action="<%= song_likes_url %>" method="post">
              <%= auth_token %>
              <input type="hidden" name="song_like[song_id]" value="<%= song.id %>">
              <input type="submit" value="Like this song">
            </form>
            <% else %>
              <% @song_like = SongLike.find_by(user_id: current_user.id, song_id: song.id) %>
              <form id="form_id" action="<%= song_like_url(@song_like) %>" method="post">
                <%= auth_token %>
                <input type="hidden" name="_method" value="delete">
                <input type="submit" value="Unlike this song">
              </form>
          <% end %>

        </li>
      <% end %>
      </ul>
    </li>
    <% end %>
  </ul>
<% end %>
